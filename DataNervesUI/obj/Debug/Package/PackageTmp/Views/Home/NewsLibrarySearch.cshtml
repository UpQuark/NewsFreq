@using System.Web.Mvc
@using System.Web.Mvc.Html
@model DataNervesUI.Models.NewsDataModel

@{
    ViewBag.Title = "News Frequency Search";
}
@section featured {
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
        </div>
}


<div id="NewsSearchForm">
    <p class="descriptionText">
        This tool allows you to analyze the popularity of topics in American news coverage.
        You can use it to gather data on major trends in news reporting and visualize them in seconds.
        Try searching issues that interest you to see how the volume of coverage changes over time and how it compares to other topics.<br/>
    </p>
    <p class="disclaimer">This application is a work in progress and will change over time. Feedback, comments and bug reports are encouraged; please direct them <a href = "mailto:sam@datanerves.com">here</a></p>
    <table id="NewsLibrarySearchForm">
        <tr>
            <td>
                <span>
                    Enter search term or terms. Boolean operators are supported
                </span><br/>
                <input type="text" id="SearchTerms" placeholder="Search Terms"/>
            </td>
        </tr>
        <tr>
            <td>
                <span> Enter date range: </span><br/>
                <input type="text" id="DateFrom" class = "DatePicker" placeholder = "Start date"/>
                <span>&nbsp; to &nbsp;</span>  
                <input type="text" id="DateTo" class = "DatePicker" placeholder = "End date"/>
                
            </td>
        </tr>
        <tr>
            <td>
                <!--
                    <span> Choose search target</span><br/>
                    <select>
                        <option value="">None</option>
                    </select>
                
                    <br/><br/>
                    -->
                <input type="button" value="Search" id="SearchButton" onclick="newsSearch()" />
                <input type="button" value="Clear data" id="ClearButton" onclick="clearResults()" />
                <div class="modal"><img src="http://i.imgur.com/RZPE8Wh.gif"/></div>
                
            </td>
        </tr>
    </table>
    
    

    <div id="SpecialSearchRadioGroup">
        <span>Special search type:</span><br/>
        <input type="radio" name="specialSearches" id="None" checked/> None <br/>
        <input type="radio" name="specialSearches" id="Monthly"/> Monthly <br/>
        <input type="radio" name="specialSearches" id="Annual"/> Annual <br/>
    </div>
    
    <div id="NewsDataChartWrapper">
        <canvas id="NewsDataChart" height="450" width="600" style="display:none" ></canvas>
    </div>
    
    <table id="NewsDataTable" style="display:none">
        <tr class="newsTableHead">
            <td>
                Search terms
            </td>
            <td>
                Date from
            </td>
            <td>
                Date to
            </td>
            <td>
                Number of articles
            </td>
        </tr>
        <tbody id="NewsDataTableContent">
        </tbody>
    </table>
    <meta name = "viewport" content = "initial-scale = 1, user-scalable = no">
</div>





@section Scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $(".DatePicker").datepicker();
        });

        $body = $("body");

        $(document).on({
            ajaxStart: function () {
                if (!$('#None').is(':checked')) {
                    $body.addClass("loading");
                }
            },
            ajaxStop: function () {
                $body.removeClass("loading");
            }
        });
    </script>
}